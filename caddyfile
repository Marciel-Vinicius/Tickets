# ------------------------------------------------------------
# Site HTTPS via nip.io para o IP público da VM
# Caddy automaticamente escuta 80/443 e redireciona HTTP→HTTPS
# ------------------------------------------------------------
20.197.180.62.nip.io {
  # pasta onde está o build do React
  root * C:/Users/nest/Desktop/Tickets/frontend/build

  # compressor de respostas estáticas
  encode gzip zstd

  # arquivos estáticos
  file_server

  # proxy para toda chamada /api/* para o Node.js local
  @api {
    path /api/*
  }
  reverse_proxy @api localhost:10000

  # cabeçalhos de segurança (opcional)
  header {
    X-Frame-Options           "DENY"
    X-Content-Type-Options    "nosniff"
    Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"
  }
}
